# offckb-template

This is a Minimal Template for CKB Full-Stack Dapps generated by [offckb](https://github.com/RetricSu/offckb).

Offckb does not do the magic. It just wraps the new CKB smart contract template and the CKB javascript Dapp framework into one mono-repo. Under the hook, it uses:

- [ckb-js-vm](https://github.com/nervosnetwork/ckb-js-vm) for smart contract development
- [next-js](https://nextjs.org/docs?utm_source=create-next-app&utm_medium=appdir-template&utm_campaign=create-next-app) and [ccc](https://github.com/ckb-devrel/ccc) for frontend development

To start the project, install the dependecies:

```bash
pnpm i
```

## Script(Smart Contract)

The on-chain script project is powered by [ckb-js-vm](https://github.com/nervosnetwork/ckb-js-vm) bootstrapped with [`create-ckb-js-vm-app`](https://github.com/nervosnetwork/ckb-js-vm).

Build on-chain script:

```bash
pnpm build
```

Test on-chain script:

```bash
pnpm test
```

## dApp frontend development

first, enter the frontend workspace:

```sh
cd frontend
```

start the app:

```sh
pnpm dev
```

change the CKB blockchain network:

edit `.env` file:

```bash
NEXT_PUBLIC_NETWORK=devnet # devnet, testnet or mainnet
```

## Deploy to devnet/testnet with offckb

Once you build your smart contracts, you can deploy them to CKB blockchain with [ckb-cli](https://github.com/nervosnetwork/ckb-cli) or any other tools.

If you want to test them in devnet/testnet blockchain, then `offckb` might be the ideal selection.

`offckb` will look for the `offckb.config.ts` file to read config information. so you will need to enter the frontend workspace to do the instruction:

```sh
cd frontend
offckb deploy --network devnet
```

If successfully deployed, you will see the deploy script info for your smart contract recorded in the path recorded in the `offckb.config.ts` file.

Every time you deploy a new version of your smart contracts, those script infos will be updated by `offckb` in the place recorded in `offckb.config.ts` and work out-of-box in your frontend.

You can also deploy smart contracts to the CKB Testnet like this:

```sh
cd frontend
offckb deploy --network testnet
```

and start your frontend Dapp targeting Testnet:

edit `.env` file:

```bash
NEXT_PUBLIC_NETWORK=testnet # devnet, testnet or mainnet
```

```bash
cd frontend
pnpm dev
```

Note that the `mainnet` network is not supported in `offckb` since `offckb` is focusing on building a friendly development environment for CKB. To gain better security, it is recommended to use production tools like [ckb-cli](https://github.com/nervosnetwork/ckb-cli) to deploy smart contracts and do transactions for the CKB mainnet.
